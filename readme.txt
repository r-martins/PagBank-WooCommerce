=== PagBank / PagSeguro Connect para WooCommerce ===
Contributors: martins56
Tags: pagseguro, pagbank, pix, recorrencia, brasil
Donate link: https://github.com/sponsors/r-martins
Requires at least: 4.0
Tested up to: 6.7
Requires PHP: 7.4
Stable tag: 4.33.3
License: GPLv3
License URI: https://www.gnu.org/licenses/gpl-3.0.html
PagBank com PIX, Cartão de Crédito, Boleto, Recorrência + Envio Fácil e com Menos Taxas no PagSeguro.
Autenticação 3D: menos chargeback + aprovações.

== Description ==

**Aceite PagBank (PagSeguro) (Pix, Cartão de Crédito, Boleto) em sua loja WooCommerce.**

**Economize nas tarifas oficiais do PagBank.** Receba no crédito à vista **a partir de 3,05% + R$0,00** de taxa de intermediação e PIX na hora por 0,99%. [Veja tabela completa](https://pbintegracoes.com/compare/?utm_source=readme&utm_content=tabela-comparativa).

O **melhor plugin de pagamentos** do Brasil.

Completo, de código aberto e gratuito, permite integrar sua loja com PagBank (PagSeguro) em poucos minutos.
Ao instalar e configurar nossa integração, você pode aceitar Pix, Boleto e Cartão de Crédito com o meio de pagamento mais confiado pelos brasileiros.

⭐️Com atualizações quase todas as semanas, suporte gratuito, e taxas cada vez menores para lojas antigas e novas.⭐️

**O preferido do Brasil, dos lojistas, e das agências e desenvolvedores profissionais.**

=== ⚡️Economize nas taxas===
Ao invés de pagar 3,99% + R$0,40 ou 4,99% + R$0,40 por transação aprovada no Cartão de Crédito, você pode optar por:
1. **Recebimento em 30 dias**: **3,05% + R$0,00** por transação aprovada no Cartão de Crédito
2. **Recebimento em 14 dias**: 3,97% + R$0,00 por transação aprovada no Cartão de Crédito
3. **PIX**: sempre 0,99% com recebimento na hora
4. **Boleto**: sempre 1,99% com recebimento em 2 dias

Se você tiver taxas negociadas ou condições negociadas melhores que estas, você também pode utilizá-las.

Consulte mais sobre elas e compare no [nosso site](https://pbintegracoes.com/compare/?utm_source=readme&utm_content=taxas).

== ⚡️ RECURSOS PRINCIPAIS ==
* Suporte a **PIX**, **Cartão de Crédito**, **Boleto** ou **Checkout PagBank**(novidade).
* Venda clubes e assinaturas com [**pagamento recorrente**](https://ajuda.pbintegracoes.com/hc/pt-br/sections/20410120690829-Recorr%C3%AAncia-e-Clube-de-Assinatura-com-WooCommerce), sem depender de outros plugins
* **OnlyFans** - Restrição de conteúdo só para assinantes. Restrinja o acesso à páginas e categorias somente pra quem é assinante. [Saiba mais](https://www.magenteiro.com/blog/wp/restricao-conteudo-para-assinantes-wordpress/).
* Integração com [**Envio Fácil**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19944920673805-Envio-F%C3%A1cil-com-WooCommerce) (economize até 70% no frete com Correios e Jadlog) sem precisar de contrato
* Suporte nativo ao [**checkout em Blocos**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) do WooCommerce (sem gambiarras com iframes)
* Suporte a [**autenticação 3D** Secure](https://ajuda.pbintegracoes.com/hc/pt-br/articles/22375922278157-Autentica%C3%A7%C3%A3o-3DS-Sua-prote%C3%A7%C3%A3o-contra-Chargeback) (reduza chargebacks e aumente suas aprovações)

== ⚡️ RECURSOS ADICIONAIS ==
* Diversas [opções de **parcelamento**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945359660173-Op%C3%A7%C3%B5es-de-Parcelamento)
* Suporte a [**descontos** no boleto e pix](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945430928909-Oferecer-Desconto-Pix-e-Boleto) (percentual ou fixo)
* Permite definir [**validade** de boletos e código PIX](https://ajuda.pbintegracoes.com/hc/pt-br/articles/24770387325837-Cancelamento-autom%C3%A1tico-de-pedidos-PIX-expirados) (em dias ou minutos)
* [**Reembolso** parcial ou total](https://ajuda.pbintegracoes.com/hc/pt-br/articles/30882664582541-Reembolso-total-ou-Parcial) direto do painel do WooCommerce
* Atualizações automáticas de **status de pedidos** mesmo que sua loja bloqueie as notificações automáticas do PagBank
* Opção de [forçar atualização](https://github.com/r-martins/PagBank-WooCommerce/releases/tag/4.31.0) de um pedido manualmente
* [Confirmação imediata de pagamento](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097176784653-Confirma%C3%A7%C3%A3o-Instant%C3%A2nea-de-Pagamento-PIX) na tela de sucesso PIX
* Permite adicionar [código JavaScript ou redirecionar](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34191612071437-Comportamento-ao-confirmar-pagamento) o cliente após a confirmação de pagamento.
* Configure como quer exibir o [nome da loja na fatura do cartão de crédito](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945038495629-Identificador-na-fatura)
* Diversas [opções de configuração de endereço](https://ajuda.pbintegracoes.com/hc/pt-br/articles/20835022998029-Configura%C3%A7%C3%B5es-de-Endere%C3%A7o-de-Entrega)
* Suporte a [High-Performance Order Storage (**HPOS**)](https://woo.com/document/high-performance-order-storage/)
* Exibição de [informações de **parcelas na página de produto** em 3 formatos diferentes](https://ajuda.pbintegracoes.com/hc/pt-br/articles/26223028355597-Exibir-informa%C3%A7%C3%B5es-de-parcelamento-na-p%C3%A1gina-de-produto)
* **Hooks** disponíveis para facilitar integrações e modificações que você queira fazer sem sobrescrever o plugin. [Veja documentação](https://ajuda.pbintegracoes.com/hc/pt-br/articles/27339148022669-Hooks-Filtros-e-A%C3%A7%C3%B5es-Dispon%C3%ADveis).
* Maior taxa de aprovação e estabilidade nas chamadas das APIs PagBank com [retentativa transparente](https://ajuda.pbintegracoes.com/hc/pt-br/articles/4695328655245-Porque-as-transa%C3%A7%C3%B5es-pelo-modelo-de-aplica%C3%A7%C3%A3o-t%C3%AAm-mais-sucesso) em caso de falha.


https://www.youtube.com/watch?v=a8rkT8IyIYo

Criado por Ricardo Martins (**Parceiro oficial PagBank/PagSeguro desde 2014**), esta é a 4ª geração das integrações PagSeguro, disponibilizadas desde 2014 no Magento, e desde 2019 no WooCommerce. Mais de 20 mil lojas atendidas e mais de 200 milhões de reais transacionados em nossas integrações.

Além disso, você também pode aceitar **pagamentos recorrentes** e criar clubes de assinatura sem depender de plugins de terceiros.

https://www.youtube.com/watch?v=FOPwBTRryNM


**Problemas com aprovação de pagamentos e chargebacks em transações com cartão de crédito?**

Nossa integração possui [autenticação 3D Secure](https://ajuda.pbintegracoes.com/hc/pt-br/articles/22375922278157-Autentica%C3%A7%C3%A3o-3DS-Sua-prote%C3%A7%C3%A3o-contra-Chargeback), que reduz drasticamente seus custos com chargebacks, e aumenta significativamente a **taxa de aprovação**.

Tudo pra você vender mais com PagBank(PagSeguro) sem sequer precisar se preocupar em contratar um serviço de antifraude.


* Termos de uso e softwares terceiros
Ao instalar o plugin PagBank Connect, você concorda com as [Regras de uso do PagBank](https://pagseguro.uol.com.br/sobre/contrato-de-servicos), seu [Contrato de Serviço](https://pagseguro.uol.com.br/sobre/contrato-de-servicos), [Termos de Segurança, Privacidade](https://pagseguro.uol.com.br/sobre/seguranca-e-privacidade) e [Compartilhamento](https://pagseguro.uol.com.br/sobre/regras-de-compartilhamento), bem como os [Termos de uso e Política de Privacidade](https://pbintegracoes.com/terms/?utm_source=readme&utm_content=termos) do desenvolvedor.


== Installation ==

=== Instalação automática via painel ===
* Navegue até Plugins > Adicionar Novo e procure por "PagBank Ricardo Martins"
* Clique no botão para instalar e ative o plugin
* Se você não estiver usando o [checkout em blocos](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) (nativo do Woo), repita o processo buscando e instalando o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) a fim de habilitar campos adicionais de endereço e CPF, que são obrigatórios no PagBank.

=== WP-CLI ===
Você pode instalar o plugin usando o [WP-CLI](https://wp-cli.org/). 

* Basta rodar o comando `wp plugin install pagbank-connect --activate`. Adicione `--allow-root` se estiver rodando o comando como root.
* Se você não estiver usando o [checkout em blocos](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) (nativo do Woo), repita o processo para instalar o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) com o comando `wp plugin install woocommerce-extra-checkout-fields-for-brazil --activate` caso ainda não tenha ele instalado.

=== Instalação manual ===
* Baixe o [arquivo zip](https://codeload.github.com/r-martins/PagBank-WooCommerce/zip/refs/heads/master) e descompacte ele em sua máquina
* Faça upload dos arquivos na pasta /wp-content/plugins/pagbank-connect, usando seu FTP
* Navegue até Plugins > Plugins instalados, e ative o plugin PagBank Connect
* Se você não estiver usando o [checkout em blocos](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) (nativo do Woo), instale o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) a fim de habilitar campos adicionais de endereço e CPF, que são obrigatórios no PagBank.
* No terminal, navegue até a pasta do plugin (wp-content/plugins/pagbank-connect) e rode `npm install` para instalar as dependências do plugin. Em seguida, rode `npm run build` para compilar os arquivos do plugin.

=== A gente instala pra você 🙀 ===
Se você preferir, podemos instalar e configurar o plugin para você sem nenhum custo.

[Saiba mais](https://pbintegracoes.com/woocommerce/agenteinstala/?utm_source=readme&utm_content=agenteinstala). 

=== Configuração ===
* Ative o meio de pagamento navegando até WooCommerce > Configurações > Pagamentos, e ativando o PagBank Connect
* Clique no PagBank Connect para acessar as configurações do módulo
* Clique em "Obter Connect Key". Você será levado para nosso site, onde poderá escolher o modelo de recebimento (14 ou 30 dias) e então autorizar nossa aplicação sem nenhum custo ou mensalidade.
* No nosso site, selecione o modelo de recebimento desejado (14 ou 30 dias - ou suas condições negociadas) e preencha as informações do responsável técnico por sua loja.
* Você será levado para o site do PagBank, onde poderá se logar e autorizar nossa aplicação em sua conta.
* Em seguida, sua *Connect Key* será exibida e enviada para o e-mail informado no passo anterior. Use ela nas configurações da sua loja.
* Salve as configurações e sua loja está pronta para vender.
* Se desejar, configure [opções de parcelamento](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945359660173-Op%C3%A7%C3%B5es-de-Parcelamento), e validade do boleto e código pix de acordo com suas necessidades.
* Conheça os [recursos disponíveis na sua integração](https://ajuda.pbintegracoes.com/hc/pt-br/sections/26127218629133-Recursos) para aproveitar ao máximo dela e vender ainda mais.

== Frequently Asked Questions ==
= Quais os requisitos para usar esta integração? =

* Ter WooCommerce 4.0 ou superior
* PHP 7.4 ou superior
* Ter uma conta Vendedor ou Empresarial no PagSeguro/PagBank
* [Autorizar nossa integração](https://pbintegracoes.com/connect/autorizar/?utm_source=readme&utm_content=pre-requisitos) em sua conta PagBank.
* Usar o Checkout em Blocos (nativo) **ou** Ter instalado o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) a fim de habilitar campos adicionais de endereço e CPF, que são obrigatórios no PagBank.

= Como funcionam os descontos nas taxas? =

Ao usar nossas integrações no modelo de recebimento em 14 ou 30 dias, ao invés de pagar 4,99% ou 3,99%, você pagará 3,97% ou 3,05% respectivamente e estará isento da taxa de R$0,40 por transação. Sem mensalidades.

Taxas menores também são aplicadas para transações parceladas, PIX e Boleto. PIX e Boleto também possuem prazos menores de recebimento.

Por exemplo, com PIX a taxa é de apenas 0,99% e o valor estará disponível em sua conta PagBank na hora.

= Eu tenho uma taxa ou condição negociada menor que estas. O que faço? =

Ao usar nossa integração, nossas taxas e condições serão aplicadas ao invés das suas. Isto é, nas transações realizadas com nosso plugin.

É importante notar que taxas negociadas no mundo físico (moderninhas) não são aplicadas no mundo online.

Se mesmo assim você possuir uma taxa ou condição melhor, e se compromete a faturar mais de R$20 mil / mês (pedidos aprovados usando nossa integração), podemos incluir sua loja em uma aplicação especial.

Ao [autorizar sua conta](https://pbintegracoes.com/connect/autorizar/?utm_source=readme&utm_content=autorizar-sua-conta), escolha a opção "Suas condições e taxas".

Sua Connect key será gerada respeitando as taxas e condições negociadas que você tem com o PagSeguro/PagBank.

= Estou tendo muitas transações negadas. O que fazer? =

Consulte [este artigo](https://ajuda.pbintegracoes.com/hc/pt-br/articles/360027712431) e entre em contato conosco se o problema persistir.

= Tenho outra pergunta não listada aqui =

Consulte nossa [Central de ajuda](https://ajuda.pbintegracoes.com/hc/pt-br/) e [entre em contato](https://ajuda.pbintegracoes.com/hc/pt-br/requests/new) conosco se não encontrar sua dúvida respondida por lá.

A maioria das dúvidas estão respondidas lá. As outras são respondidas em até 2 dias após entrar em contato.

= O plugin atualiza os status automaticamente? =

Sim. 

E quando há uma transação no PagBank, um link para ela é exibida na página do pedido. Assim você pode confirmar novamente o status do mesmo.

Caso utilize Cloudflare ou CDN, certifique-se de [configurá-lo corretamente](https://ajuda.pbintegracoes.com/hc/pt-br/articles/115002699823-Usu%C3%A1rios-Cloudflare-e-CDN-s) e liberar os IPs do PagSeguro para evitar bloqueios nas notificações.

= Posso testar usando a Sandbox? =

Sim. Basta clicar no botão 'Obter Connect Key para Testes' localizado nas configurações do plugin, seguir as instruções, e informar sua Connect Key de testes no campo indicado.

Um link para mais detalhes sobre como utilizar a Sandbox está disponível na página de configurações do plugin.

Você também pode testar com dados reais e realizar o estorno. As tarifas e taxas são reembolsadas, não incidindo nenhum custo.

= Este é um plugin oficial? =

Não. Este é um plugin desenvolvido por Ricardo Martins (e colaboradores), parceiro PagBank desde 2014.

Apesar da parceria entre o desenvolvedor e o PagBank que concede descontos e benefícios, este NÃO é um produto oficial.

PagSeguro e PagBank são marcas do UOL.

= Qual diferença deste plugin pro oficial? =

Nosso plugin está em constante evolução, possui recursos exclusivos e é desenvolvido por um parceiro oficial PagBank desde 2014.

Além disso você conta com um suporte profissional e eficiente.

Por estas e outras razões, muitos lojistas e agências profissionais preferem nossa integração.

= O plugin é compatível com o WooCommerce Subscriptions? =

Você não precisa do plugin WooCommerce Subscriptions ou nenhum outro para aceitar [pagamentos recorrentes com nossa integração](https://ajuda.pbintegracoes.com/hc/pt-br/sections/20410120690829-Recorr%C3%AAncia-e-Clube-de-Assinatura-com-WooCommerce).


= Posso modificar e comercializar este plugin? =

O plugin é licenciado sob GPL v3. Você pode modificar e distribuir, contanto que suas melhorias e correções sejam contribuidas de volta com o projeto.

Você deve fazer isso através de Pull Requests ao [repositório oficial no github](https://github.com/r-martins/PagBank-WooCommerce).

== Changelog ==

= 4.33.3 =
* Correção/melhoria: ao digitar uma connect key inválida, a validação dizia "Resposta API Vazia" ao invés de dizer que a chave está incorreta
* Correção: Quando assinaturas tem descontos na primeira cobrança, o frete era excluido nas cobranças seguintes. (Reportado por Ricardo da InfoDoors)
* Correção: nos casos onde o pedido inicial de uma recorrência era excluido um erro ocorria e impedia outras recorrências de serem cobradas. (Reportado por Ricardo da InfoDoors)

= 4.33.2 =
* Melhoria: agora o botão de Live Preview está disponível na pagina do nosso plugin
* Correção/Melhoria: nos casos onde a opcao 'Até X parcelas sem juros' é configurado como 1 (Ao invés de escolher a opção 'Juros por conta do comprador') é utilizada, uma mensagem de erro era caregada no cálculo de parcelas (Parameter max_installments_no_interest should be equal 0 or greater than 1.) impossibilitando a compra com cartão.

= 4.33.1 =
* Correção: ao usar Checkout PagBank(redirecionamento) cupons de desconto eram ignorados. Reportado por Lucas ([Nuvem Automação](https://www.nuvemautomacao.com.br/?utm_source=pagbank-connect&utm_medium=wordpress&utm_campaign=readme)).
* Correção: am alguns cenários onde um usuário modificou a tabela de recorrencia manualmente, um erro poderia ocorrer ao salvar um produto. Reportado por Alexandre ([X2Design Agência Web](https://www.x2design.com.br/?utm_source=pagbank-connect&utm_medium=wordpress&utm_campaign=readme))
* Correção: warning de depreciação era logado quando se pausava uma assinatura criada recentemente em lojas com PHP 8 ou superior.
* Correção: em lojas que um dia tiveram um produto marcado como recorrente pagbank mas desativaram a recorrencia nas configs gerais do modulo, ao adicionar este produto no carrinho, outros meios de pagamento eram omitidos.
* Correção: uso de DateMalformedStringException de forma desnecessária em uma de nossas classes, poderiam causar alertas em lojas com PHP inferior ao 8.3

= 4.33.0 =
* Melhoria: agora quando uma cobrança recorrente falha, o plugin tem a opção de tentar realizar a cobrança novamente automaticamente antes de cancelar a assinatura.
* Correção: ao atualizar um pedido feito com checkout pagbank alguns campos e atributos eram deixados de lado
* Correção de erros PHP Deprecated que eram logados
* Pequenos ajustes nos termos e textos dos campos do admin>recorrencia
* Em alguns cenários, ao inserir o shortcode de parcelamentos ([rm_pagbank_credit_card_installments]) na página do produto, o mesmo era exibido antes do local inserido. (Reportado por Rafael Tasca Design Web)

= 4.32.1 =
* Ajuste: Checkout PagBank não redirecionava para o PagBank quando usado em conjunto com o plugin NextMove Lite - Thank You Page for WooCommerce
* Correção: Erro Fatal poderia ocorrer em lojas com PHP 7.4 por conta de tipo de objeto declarado incompatível.
* Correção: Pagar no PagBank tinha título padrão incorreto (Boleto via PagBank)

= 4.32.0 =
* Checkout PagBank adicionado. Agora você pode permitir pagar com o checkout PagBank.
* Melhorias de código diversas
* Melhoria: pequena melhoria na verificação da disponibilidade de configuração de ícones dinâmicos em ambiente sem HTTPS.
* Correção: em alguns cenários, lojistas que usavam a opção de exibir meios de pagamento agrupados, após migrarem da versão 4.13.0 para uma mais nova, não conseguiam mais acessar as opções de configuração de cartão, pix e boleto, além de ter problemas na finalização dos pedidos.


= 4.31.0 =
* Adicionado recurso para forçar atualização de pedidos independente do sucesso no recebimento das notificaçõs PagBank [saiba mais](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34589281628813)

= 4.30.0 =
* Melhoria paliativa: alguns lojistas na hostgator têm experimentado problemas com as notificações do PagBank causadas pelo mod_security, e seus pedidos não são atualizados. Enquanto não implementamos a atualização pró-ativa de pedidos, você passa a ter a opção de "Forçar atualização" do pedido junto ao PagBank nos detalhes do pedido.

= 4.29.3 =
* Correção: em alguns cenários, ao realizar uma compra parcelada com checkout em blocos(nativo) o valor das parcelas selecionadas não era obtido corretamente, ocasionando erro na finalização do pedido devido ao parametro installments.

= 4.29.2 =
* Alteração: evento depreciado onCheckoutBeforeProcessing alterado para onCheckoutValidation, evitando problemas futuros para usuários do checkout em blocos (nativo woo).
* Correção: quando nome do cliente era informado com espaços duplicados um erro na validação 3D Secure poderia acontecer.
* Correção: nome do cliente com caracteres inválidos (ex: $#@) digitados acidentalmente ocasionavam erros na finalização do pedido e agora são removidos pro-ativamente.

= 4.29.1 =
* Correção: o hook de mudança de status de uma assinatura (pagbank_recurring_subscription_status_changed) não era acionado em todas as ocasiões, dificultando integrações de terceiros. Reportado por Thiago Póvoa.

= 4.29.0 =
* Agora é possível adicionar códigos JavaScript na tela de sucesso após a confirmação de pagamento ser recebida ou redirecionar o cliente pra outra url. Isso torna sua vida mais fácil ao integrar com GA4, Tag Manager, Facebook pixel, etc. [Saiba mais](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34191612071437-Comportamento-ao-confirmar-pagamento).
* Corrigido bug no botão de Copiar código Pix ou boleto. Ocorria em alguns checkouts de plugins de terceiros.
* Melhoria: adicionado pequeno <span> no texto das instruções de PIX a fim de facilitar customizações CSS. (Sugerido por Weliton Martins)

= 4.28.0 =
* Agora você pode dar a opção do seu cliente usar 3D Secure somente quando uma transação falhar e permitir retentativa (ex: antifraude). [Saiba mais](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34051167045517-Permitir-tentar-novamente-com-valida%C3%A7%C3%A3o-3DS).
* Descontos PIX ou Boleto agora são preservados após atualização de um pedido e exibidos profissionalmente no admin.
* Em alguns casos onde o checkout do Woocommerce apontava para uma página incorreta, nosso JS não era inserido com sucesso no checkout em blocos impedindo criptografia do cartão e finalização do pedido.
* Correção: Em alguns cenários quando o e-mail do cliente continha letras em caixa alta (geralmente no celular), o PagBank impedia a finalização do pedido.
* Melhoria: agora o campo de formato das informações de parcelamento no admin só é exibido se o shortcode de parcelamento ou informações de parcelamento na página de produto estiver ativo, tornando a configuração mais limpa e precisa.

= 4.27.1 =
* Corrige erro fatal em alguns cenários do admin após última atualização, que fazia o plugin ser desativado.

= 4.27.0 =
* Assinantes de um plano recorrente agora podem trocar de cartão de crédito.
* Agora é possível especificar o número máximo de cobranças em um produto recorrente.
* Melhoria: Adicionamos uma mensagem de aviso nas configs do plugin quando a validade do pix ou boleto for superior à configuração de retenção de estoque, o que poderá fazer um pedido ser cancelado antes de ser pago.
* Correção: Corrigido possível erro fatal na área de assinaturas que desativaria o plugin.
* Correção: pedidos com período de teste na recorrência não eram finalizados como esperado no Checkout em blocos, fazendo com que a assinatura não fosse criada
* Correção: no checkout em Blocos com 3D Secure ativo, um cliente não registrado tinha problemas ao finalizar compras (dados inválidos ou insuficientes) na primeira tentativa de finalizar compra com cartão.

= 4.26.0 =
* Correção: em lojas com checkout em blocos, o método de calcular parcelas era chamado indevidamente na tela de sucesso de compra logando erros.
* Correção/melhoria: em alguns cenários onde campos do checkout eram omitidos, a validação 3DS tornava o botão de Finalizar Compra inoperante devido a erros. Agora não só exibiremos o que pode ter dado errado, como também preenchemos alguns campos com valores como 'Nao informado' e 'n/d' a fim de garantir compatibilidade com tais tentativas e melhorar experiência do usuário nesses cenários.
* Correção/melhoria: em alguns cenários, dependendo da configuração ou plugin de checkout utilizado, alguns arquivos JavaScript não eram inseridos, ocasionando erros na criptografia do cartao, aplicação de máscaras, e consequentemente impedindo a finalização de pedidos com Cartão de Crédito em checkouts diferentes do checkout em bloco.

= 4.25.6 =
* Correção: cobranças recorrentes subsequentes (após pedido inicial) falhavam por conta do documento do cliente quando checkout em blocos era utilizado
* Correção: em alguns cenários, boleto e pix eram exibidos como formas de pagamento em pedidos recorrentes quando checkout em blocos era utilizado

= 4.25.5 =
* Correção: pedidos PIX eram cancelados antes da hora em lojas com HPOS desabilitado.

= 4.25.4 =
* Correcão: ao usar um cartao invalido a falha no cálculo de parcelas poderia logar erros no backend em alguns cenários na chamada de um método print_r do php.
* Correção: Notice de que query estaria sendo chamada de forma incorreta ao processar o cron de pedidos pix expirados era logada quando HPOS não está ativo.
* Melhoria: Quando CEP da loja não está configurado, chamadas do Envio Facil logavam retorno de que algum parametro estava faltando sem indicar qual. Agora sequer faremos a requisição ao servidor.

= 4.25.3 =
* Corrige erro na exibição de lista de pedidos associados a uma assinatura quando um dos pedidos foi reembolsado. Reportado por Dennis (Sysney Informática).

= 4.25.2 =
* Cartflows: corrigido erro de valor inválido no payment_method.card.encrypted quando usado com o plugin Cartflows.

= 4.25.1 =
* Correção: Possível erro ao finalizar compras de pedidos recorrentes sem restrição de conteúdo (array_merge argument 2 must be array). Reportado por Dennis (Sysney Informática).

= 4.25.0 =
* Recorrência agora tem suporte a restrição de conteúdo só para assinantes. Você pode restringir o acesso à páginas e categorias somente pra quem é assinante.
* Correções e melhorias diversas no recurso de assinaturas. Corrigimos um problema onde uma assinatura pendente de cancelamento não era cancelada, tratamos algumas exceções que poderiam atrasar a cobrança de outras assinaturas, e muito mais.
* Adicionamos detalhes aos logs sobre a assinatura que foi cancelada. Seja por conta de um cancelamento esperado como por um erro no pagamento da recorrência.
* Adicionamos novas actions na recorrência que podem ser úteis para quem deseja estender esta funcionalidade em outros plugins.
* Adicionada opção para marcar pedidos como completo quando só tiver produtos virtuais

= 4.24.1 =
* Correção Recorrência: quando a primeira tentativa de fechar um pedido falhava (ex: cartao negado) o pedido era criado de forma insuficiente, impossibilitando o processamento da recorrência para futuros pedidos.

= 4.24.0 =
* Recorrência: agora é possível configurar o plugin para excluir outros produtos do carrinho, evitando que a mensagem de que produtos recorrentes devem ser comprados sozinhos seja exibida.
* Envio Fácil só exibia uma forma de envio (geralmente a mais cara) ao invés de exibir todas disponíveis.
* Correção: em alguns temas o cálculo de parcelas era chamado na tela de sucesso, fazendo com que uma msg de erro fosse logada no pagbank-connect.log.

= 4.23.0 =
* Adicionado suporte ao WP 6.7 e WooCommerce 9.4.
* Melhoria: agora você não precisa mais de plugins de terceiros para disparar e-mail de novo pedido com código PIX ou Boleto. Basta ativar a opção nas configurações.
* Pequena correção de notice de payment_method não definido em algumas situações quando usado com checkout em blocos.
* Melhoria: notamos que algumas lojas enviavam ou permitiam enviar o campo Estado com letras minúsculas, ocasionando erro na finalização da compra. Agora tratamos isso no próprio plugin antes do envio.

= 4.22.2 =
* Ajuste: devido a um bug no plugin `pix-por-piggly` algumas lojas tiveram problemas com nossa última atualização. Refizemos a última correção de outra forma, a fim de não ser mais impactado pelo bug no outro plugin.  

= 4.22.1 =
* Ajuste: logo após a instalação do plugin, uma falha na validação da disponibilidade de usar icones com cored dinâmicas tornava o admin bem lento por alguns segundos. Refatoramos o momento que a validação é feita evitando problemas com loops. :)

= 4.22.0 =
* Melhoria: detecção automática de bandeira no checkout em bloco
* Melhoria: não exibimos mais o seletor de parcelas em pagamentos recorrentes (já que era sempre 1x)
* Melhoria: agora os ícones dos meios de pagamento também aparecem no checkout em blocos
* Melhoria: removemos o efeito hover nos campos do plugin no checkout em blocos, que substituia os placeholders por __/__ (por exemplo)
* Melhoria: campo de data de validade do cartão adicionará 0 quando o primeiro número digitado for maior que 1. Ex: 2, ficará 02/, assim como ocorre no form nativo no Woocommerce legado.
* Mudança interna: removemos os arquivos da pasta build do nosso git. Se você instala nosso plugin via git ou composer, precisará compilá-los manualmente com npm run build. Mais detalhes no README.md.
* Correção: dependendo da configuração da loja, o checkout em blocos permitia o envio do formulário e checkout em pedidos menores que R$1,00, ocasionando erro de CPF/CNPJ

= 4.21.1 =
* Pequena correção no dropdown de parcelas em pagamentos recorrentes (quebrado na última versão)
* Normalizamos a nomenclatura de "sem juros" que antes aparecia "sem acréscimo" em alguns casos no dropdown de parcelamento

= 4.21.0 =
* Adicionado suporte ao novo Checkoutem Blocks do WooCommerce

= 4.20.2 =
* Correção importante: em alguns casos uma falha de arredondamento na autenticação 3d em compras parceladas fazia com que o pedido não pudesse ser concluído, ocasionando erro 'payment_method.authentication_method.id (Autenticação 3D - Recarregue e tente novamente)'.

= 4.20.1 =
* Correção: instruções de boleto e pix pararam de ser adicionadas na tela de sucesso após nossa última atualização

= 4.20.0 =
* Suporte a reembolso parcial ou total via painel do WooCommerce
* Correção: problema de compatibilidade com alguns plugins ocasionavam falha na finalização de pedidos com cartão de crédito (40002 - Valor inválido. Parâmetro: charges[0].payment_method.card.encrypted (Criptografia do cartão)).
* Bling: agora o Bling identificará em quantas parcelas um pedido com cartão de crédito foi feito. Veja [como integrar](https://youtu.be/S-_ZwWMnOdc).
* Nota importante: a partir desta versão o `payment_method` salvo no pedido não será mais `rm-pagbank` para todos os métodos, e terá o sufixo -cc, -pix ou -boleto para identificar o método de pagamento. Isso pode afetar integrações que dependem deste campo. 

= 4.19.0 =
* Melhoria: agora exibimos que um pedido foi pago ainda na tela de sucesso se ele for pago nos primeiros 10 minutos.
* Melhoria: atendendo a pedidos, o ícone de Copiar exibido na tela de sucesso de PIX e Boleto passou a ser um botão ao invés de ícone.

= Versões mais antigas =
* Veja [changelog completo](https://github.com/r-martins/PagBank-WooCommerce/releases). 

== Upgrade Notice ==
Ao atualizar nosso plugin, você se protege contra falhas de funcionamento e segurança e aumenta suas chances de conversão no momento mais importante do ciclo de vendas.

Ao atualizar versões majoritárias (ex: 3.5 para 4.0), certifique-se de testar rigorosamente sua integração, pois mudanças deste tipo tendem a trazer incompatibilidades entre versões.

== Screenshots ==
1. Cartão de Crédito na visão do cliente
2. PIX - Tela de Sucesso
3. Configurações de cartão de crédito
4. PIX e Boleto - Configurações
5. Admin - Tela do Pedido
6. Envio Fácil
7. Autenticação 3D Secure
8. Pedidos Recorrentes (assinaturas)
9. Parcelamento na Página de Produto
10. Suporte a Checkout em Blocos do WooCommerce
