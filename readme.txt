=== PagBank / PagSeguro Connect para WooCommerce ===
Contributors: martins56
Tags: pagseguro, pagbank, pix, recorrencia, brasil
Donate link: https://github.com/sponsors/r-martins
Requires at least: 4.0
Tested up to: 6.8
Requires PHP: 7.4
Stable tag: 4.42.1
License: GPLv3
License URI: https://www.gnu.org/licenses/gpl-3.0.html
PagBank com PIX, Cart√£o de Cr√©dito, Boleto, Recorr√™ncia + Envio F√°cil e com Menos Taxas no PagSeguro.
Autentica√ß√£o 3D: menos chargeback + aprova√ß√µes.

== Description ==

**Aceite PagBank (PagSeguro) (Pix, Cart√£o de Cr√©dito, Boleto) em sua loja WooCommerce.**

**Economize nas tarifas oficiais do PagBank.** Receba no cr√©dito √† vista **a partir de 3,05% + R$0,00** de taxa de intermedia√ß√£o e PIX na hora por 0,99%. [Veja tabela completa](https://pbintegracoes.com/compare/?utm_source=readme&utm_content=tabela-comparativa).

O **melhor plugin de pagamentos** do Brasil.

Completo, de c√≥digo aberto e gratuito, permite integrar sua loja com PagBank (PagSeguro) em poucos minutos.
Ao instalar e configurar nossa integra√ß√£o, voc√™ pode aceitar Pix, Boleto e Cart√£o de Cr√©dito com o meio de pagamento mais confiado pelos brasileiros.

‚≠êÔ∏èCom atualiza√ß√µes quase todas as semanas, suporte gratuito, e taxas cada vez menores para lojas antigas e novas.‚≠êÔ∏è

**O preferido do Brasil, dos lojistas, e das ag√™ncias e desenvolvedores profissionais.**

=== ‚ö°Ô∏èEconomize nas taxas===
Ao inv√©s de pagar 3,99% + R$0,40 ou 4,99% + R$0,40 por transa√ß√£o aprovada no Cart√£o de Cr√©dito, voc√™ pode optar por:
1. **Recebimento em 30 dias**: **3,05% + R$0,00** por transa√ß√£o aprovada no Cart√£o de Cr√©dito
2. **Recebimento em 14 dias**: 3,97% + R$0,00 por transa√ß√£o aprovada no Cart√£o de Cr√©dito
3. **PIX**: sempre 0,99% com recebimento na hora
4. **Boleto**: sempre 1,99% com recebimento em 2 dias

Se voc√™ tiver taxas negociadas ou condi√ß√µes negociadas melhores que estas, voc√™ tamb√©m pode utiliz√°-las.

Consulte mais sobre elas e compare no [nosso site](https://pbintegracoes.com/compare/?utm_source=readme&utm_content=taxas).

== ‚ö°Ô∏è RECURSOS PRINCIPAIS ==
* Pagamentos sem sair da loja com **PIX**, **Cart√£o de Cr√©dito**, **Boleto** ou **Checkout PagBank** (redirect/link).
* Venda clubes e assinaturas com [**pagamento recorrente**](https://ajuda.pbintegracoes.com/hc/pt-br/sections/20410120690829-Recorr%C3%AAncia-e-Clube-de-Assinatura-com-WooCommerce), sem depender de outros plugins
* **OnlyFans** - Restri√ß√£o de conte√∫do s√≥ para assinantes. Restrinja o acesso √† p√°ginas e categorias somente pra quem √© assinante. [Saiba mais](https://www.magenteiro.com/blog/wp/restricao-conteudo-para-assinantes-wordpress/).
* Integra√ß√£o com [**Envio F√°cil**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19944920673805-Envio-F%C3%A1cil-com-WooCommerce) (economize at√© 70% no frete com Correios e Jadlog) sem precisar de contrato
* Suporte nativo ao [**checkout em Blocos**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) do WooCommerce (sem gambiarras com iframes), Checkout Legado, Fluid Checkout e muitos outros.
* [**Autentica√ß√£o 3D**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/22375922278157-Autentica%C3%A7%C3%A3o-3DS-Sua-prote%C3%A7%C3%A3o-contra-Chargeback) para acabar com chargebacks e aumentar aprova√ß√£o. Pode ser configurado somente para pagamentos negados na primeira tentativa.
* [**Reembolso** parcial ou total](https://ajuda.pbintegracoes.com/hc/pt-br/articles/30882664582541-Reembolso-total-ou-Parcial) direto do painel do WooCommerce
* Atualiza√ß√£o de pedidos autom√°tica, inclusive com [confirma√ß√£o de pagamento instant√¢neo PIX]((https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097176784653-Confirma%C3%A7%C3%A3o-Instant%C3%A2nea-de-Pagamento-PIX) com [comportamento configur√°vel](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34191612071437-Comportamento-ao-confirmar-pagamento).
* Infinitas [op√ß√µes de **parcelamento**](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945359660173-Op%C3%A7%C3%B5es-de-Parcelamento)

== ‚ö°Ô∏è RECURSOS ADICIONAIS ==
* Suporte a [**descontos** no boleto e pix](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945430928909-Oferecer-Desconto-Pix-e-Boleto) (percentual ou fixo)
* Permite definir [**validade** de boletos e c√≥digo PIX](https://ajuda.pbintegracoes.com/hc/pt-br/articles/24770387325837-Cancelamento-autom%C3%A1tico-de-pedidos-PIX-expirados) (em dias ou minutos)
* Atualiza√ß√µes autom√°ticas de **status de pedidos** mesmo que sua loja bloqueie as notifica√ß√µes autom√°ticas do PagBank
* Op√ß√£o de [for√ßar atualiza√ß√£o](https://github.com/r-martins/PagBank-WooCommerce/releases/tag/4.31.0) de um pedido manualmente ou automaticamente
* Permite adicionar [c√≥digo JavaScript ou redirecionar](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34191612071437-Comportamento-ao-confirmar-pagamento) o cliente ap√≥s a confirma√ß√£o de pagamento.
* Configure como quer exibir o [nome da loja na fatura do cart√£o de cr√©dito](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945038495629-Identificador-na-fatura)
* Diversas [op√ß√µes de configura√ß√£o de endere√ßo](https://ajuda.pbintegracoes.com/hc/pt-br/articles/20835022998029-Configura%C3%A7%C3%B5es-de-Endere%C3%A7o-de-Entrega)
* Suporte a [High-Performance Order Storage (**HPOS**)](https://woo.com/document/high-performance-order-storage/)
* Exibi√ß√£o de [informa√ß√µes de **parcelas na p√°gina de produto** em 3 formatos diferentes](https://ajuda.pbintegracoes.com/hc/pt-br/articles/26223028355597-Exibir-informa%C3%A7%C3%B5es-de-parcelamento-na-p%C3%A1gina-de-produto)
* **Hooks** dispon√≠veis para facilitar integra√ß√µes e modifica√ß√µes que voc√™ queira fazer sem sobrescrever o plugin. [Veja documenta√ß√£o](https://ajuda.pbintegracoes.com/hc/pt-br/articles/27339148022669-Hooks-Filtros-e-A%C3%A7%C3%B5es-Dispon%C3%ADveis).
* Maior taxa de aprova√ß√£o e estabilidade nas chamadas das APIs PagBank com [retentativa transparente](https://ajuda.pbintegracoes.com/hc/pt-br/articles/4695328655245-Porque-as-transa%C3%A7%C3%B5es-pelo-modelo-de-aplica%C3%A7%C3%A3o-t%C3%AAm-mais-sucesso) em caso de falha.
* Use a mesma conta PagBank e a mesma Connect Key para integrar **v√°rias lojas** WooCommerce, sem precisar de uma Connect Key para cada loja.


https://www.youtube.com/watch?v=a8rkT8IyIYo

Criado por Ricardo Martins (**Parceiro oficial PagBank/PagSeguro desde 2014**), esta √© a 4¬™ gera√ß√£o das integra√ß√µes PagSeguro, disponibilizadas desde 2014 no Magento, e desde 2019 no WooCommerce. Mais de 20 mil lojas atendidas e mais de 200 milh√µes de reais transacionados em nossas integra√ß√µes.

Al√©m disso, voc√™ tamb√©m pode aceitar **pagamentos recorrentes** e criar clubes de assinatura sem depender de plugins de terceiros.

https://www.youtube.com/watch?v=FOPwBTRryNM


**Problemas com aprova√ß√£o de pagamentos e chargebacks em transa√ß√µes com cart√£o de cr√©dito?**

Nossa integra√ß√£o possui [autentica√ß√£o 3D Secure](https://ajuda.pbintegracoes.com/hc/pt-br/articles/22375922278157-Autentica%C3%A7%C3%A3o-3DS-Sua-prote%C3%A7%C3%A3o-contra-Chargeback), que reduz drasticamente seus custos com chargebacks, e aumenta significativamente a **taxa de aprova√ß√£o**.

Tudo pra voc√™ vender mais com PagBank(PagSeguro) sem sequer precisar se preocupar em contratar um servi√ßo de antifraude.


* Termos de uso e softwares terceiros
Ao instalar o plugin PagBank Connect, voc√™ concorda com as [Regras de uso do PagBank](https://pagseguro.uol.com.br/sobre/contrato-de-servicos), seu [Contrato de Servi√ßo](https://pagseguro.uol.com.br/sobre/contrato-de-servicos), [Termos de Seguran√ßa, Privacidade](https://pagseguro.uol.com.br/sobre/seguranca-e-privacidade) e [Compartilhamento](https://pagseguro.uol.com.br/sobre/regras-de-compartilhamento), bem como os [Termos de uso e Pol√≠tica de Privacidade](https://pbintegracoes.com/terms/?utm_source=readme&utm_content=termos) do desenvolvedor.


== Installation ==

=== Instala√ß√£o autom√°tica via painel ===
* Navegue at√© Plugins > Adicionar Novo e procure por "PagBank Ricardo Martins"
* Clique no bot√£o para instalar e ative o plugin
* Se voc√™ n√£o estiver usando o [checkout em blocos](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) (nativo do Woo), repita o processo buscando e instalando o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) a fim de habilitar campos adicionais de endere√ßo e CPF, que s√£o obrigat√≥rios no PagBank.

=== WP-CLI ===
Voc√™ pode instalar o plugin usando o [WP-CLI](https://wp-cli.org/). 

* Basta rodar o comando `wp plugin install pagbank-connect --activate`. Adicione `--allow-root` se estiver rodando o comando como root.
* Se voc√™ n√£o estiver usando o [checkout em blocos](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) (nativo do Woo), repita o processo para instalar o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) com o comando `wp plugin install woocommerce-extra-checkout-fields-for-brazil --activate` caso ainda n√£o tenha ele instalado.

=== Instala√ß√£o manual ===
* Baixe o [arquivo zip](https://codeload.github.com/r-martins/PagBank-WooCommerce/zip/refs/heads/master) e descompacte ele em sua m√°quina
* Fa√ßa upload dos arquivos na pasta /wp-content/plugins/pagbank-connect, usando seu FTP
* Navegue at√© Plugins > Plugins instalados, e ative o plugin PagBank Connect
* Se voc√™ n√£o estiver usando o [checkout em blocos](https://ajuda.pbintegracoes.com/hc/pt-br/articles/31097182009741-Suporte-ao-Checkout-em-Blocos) (nativo do Woo), instale o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) a fim de habilitar campos adicionais de endere√ßo e CPF, que s√£o obrigat√≥rios no PagBank.
* No terminal, navegue at√© a pasta do plugin (wp-content/plugins/pagbank-connect) e rode `npm install` para instalar as depend√™ncias do plugin. Em seguida, rode `npm run build` para compilar os arquivos do plugin.

=== A gente instala pra voc√™ üôÄ ===
Se voc√™ preferir, podemos instalar e configurar o plugin para voc√™ sem nenhum custo.

[Saiba mais](https://pbintegracoes.com/woocommerce/agenteinstala/?utm_source=readme&utm_content=agenteinstala). 

=== Configura√ß√£o ===
* Ative o meio de pagamento navegando at√© WooCommerce > Configura√ß√µes > Pagamentos, e ativando o PagBank Connect
* Clique no PagBank Connect para acessar as configura√ß√µes do m√≥dulo
* Clique em "Obter Connect Key". Voc√™ ser√° levado para nosso site, onde poder√° escolher o modelo de recebimento (14 ou 30 dias) e ent√£o autorizar nossa aplica√ß√£o sem nenhum custo ou mensalidade.
* No nosso site, selecione o modelo de recebimento desejado (14 ou 30 dias - ou suas condi√ß√µes negociadas) e preencha as informa√ß√µes do respons√°vel t√©cnico por sua loja.
* Voc√™ ser√° levado para o site do PagBank, onde poder√° se logar e autorizar nossa aplica√ß√£o em sua conta.
* Em seguida, sua *Connect Key* ser√° exibida e enviada para o e-mail informado no passo anterior. Use ela nas configura√ß√µes da sua loja.
* Salve as configura√ß√µes e sua loja est√° pronta para vender.
* Se desejar, configure [op√ß√µes de parcelamento](https://ajuda.pbintegracoes.com/hc/pt-br/articles/19945359660173-Op%C3%A7%C3%B5es-de-Parcelamento), e validade do boleto e c√≥digo pix de acordo com suas necessidades.
* Conhe√ßa os [recursos dispon√≠veis na sua integra√ß√£o](https://ajuda.pbintegracoes.com/hc/pt-br/sections/26127218629133-Recursos) para aproveitar ao m√°ximo dela e vender ainda mais.

== Frequently Asked Questions ==
= Quais os requisitos para usar esta integra√ß√£o? =

* Ter WooCommerce 4.0 ou superior
* PHP 7.4 ou superior
* Ter uma conta Vendedor ou Empresarial no PagSeguro/PagBank
* [Autorizar nossa integra√ß√£o](https://pbintegracoes.com/connect/autorizar/?utm_source=readme&utm_content=pre-requisitos) em sua conta PagBank.
* Usar o Checkout em Blocos (nativo) **ou** Ter instalado o plugin [Brazilian Market on WooCommerce](https://br.wordpress.org/plugins/woocommerce-extra-checkout-fields-for-brazil/) a fim de habilitar campos adicionais de endere√ßo e CPF, que s√£o obrigat√≥rios no PagBank.

= Como funcionam os descontos nas taxas? =

Ao usar nossas integra√ß√µes no modelo de recebimento em 14 ou 30 dias, ao inv√©s de pagar 4,99% ou 3,99%, voc√™ pagar√° 3,97% ou 3,05% respectivamente e estar√° isento da taxa de R$0,40 por transa√ß√£o. Sem mensalidades.

Taxas menores tamb√©m s√£o aplicadas para transa√ß√µes parceladas, PIX e Boleto. PIX e Boleto tamb√©m possuem prazos menores de recebimento.

Por exemplo, com PIX a taxa √© de apenas 0,99% e o valor estar√° dispon√≠vel em sua conta PagBank na hora.

= Eu tenho uma taxa ou condi√ß√£o negociada menor que estas. O que fa√ßo? =

Ao usar nossa integra√ß√£o, nossas taxas e condi√ß√µes ser√£o aplicadas ao inv√©s das suas. Isto √©, nas transa√ß√µes realizadas com nosso plugin.

√â importante notar que taxas negociadas no mundo f√≠sico (moderninhas) n√£o s√£o aplicadas no mundo online.

Se mesmo assim voc√™ possuir uma taxa ou condi√ß√£o melhor, e se compromete a faturar mais de R$20 mil / m√™s (pedidos aprovados usando nossa integra√ß√£o), podemos incluir sua loja em uma aplica√ß√£o especial.

Ao [autorizar sua conta](https://pbintegracoes.com/connect/autorizar/?utm_source=readme&utm_content=autorizar-sua-conta), escolha a op√ß√£o "Suas condi√ß√µes e taxas".

Sua Connect key ser√° gerada respeitando as taxas e condi√ß√µes negociadas que voc√™ tem com o PagSeguro/PagBank.

= Estou tendo muitas transa√ß√µes negadas. O que fazer? =

Consulte [este artigo](https://ajuda.pbintegracoes.com/hc/pt-br/articles/360027712431) e entre em contato conosco se o problema persistir.

= Tenho outra pergunta n√£o listada aqui =

Consulte nossa [Central de ajuda](https://ajuda.pbintegracoes.com/hc/pt-br/) e [entre em contato](https://ajuda.pbintegracoes.com/hc/pt-br/requests/new) conosco se n√£o encontrar sua d√∫vida respondida por l√°.

A maioria das d√∫vidas est√£o respondidas l√°. As outras s√£o respondidas em at√© 2 dias ap√≥s entrar em contato.

= O plugin atualiza os status automaticamente? =

Sim. 

E quando h√° uma transa√ß√£o no PagBank, um link para ela √© exibida na p√°gina do pedido. Assim voc√™ pode confirmar novamente o status do mesmo.

Caso utilize Cloudflare ou CDN, certifique-se de [configur√°-lo corretamente](https://ajuda.pbintegracoes.com/hc/pt-br/articles/115002699823-Usu%C3%A1rios-Cloudflare-e-CDN-s) e liberar os IPs do PagSeguro para evitar bloqueios nas notifica√ß√µes.

= Posso testar usando a Sandbox? =

Sim. Basta clicar no bot√£o 'Obter Connect Key para Testes' localizado nas configura√ß√µes do plugin, seguir as instru√ß√µes, e informar sua Connect Key de testes no campo indicado.

Um link para mais detalhes sobre como utilizar a Sandbox est√° dispon√≠vel na p√°gina de configura√ß√µes do plugin.

Voc√™ tamb√©m pode testar com dados reais e realizar o estorno. As tarifas e taxas s√£o reembolsadas, n√£o incidindo nenhum custo.

= Este √© um plugin oficial? =

N√£o. Este √© um plugin desenvolvido por Ricardo Martins (e colaboradores), parceiro PagBank desde 2014.

Apesar da parceria entre o desenvolvedor e o PagBank que concede descontos e benef√≠cios, este N√ÉO √© um produto oficial.

PagSeguro e PagBank s√£o marcas do UOL.

= Qual diferen√ßa deste plugin pro oficial? =

Nosso plugin est√° em constante evolu√ß√£o, possui recursos exclusivos e √© desenvolvido por um parceiro oficial PagBank desde 2014.

Al√©m disso voc√™ conta com um suporte profissional e eficiente.

Por estas e outras raz√µes, muitos lojistas e ag√™ncias profissionais preferem nossa integra√ß√£o.

= O plugin √© compat√≠vel com o WooCommerce Subscriptions? =

Voc√™ n√£o precisa do plugin WooCommerce Subscriptions ou nenhum outro para aceitar [pagamentos recorrentes com nossa integra√ß√£o](https://ajuda.pbintegracoes.com/hc/pt-br/sections/20410120690829-Recorr%C3%AAncia-e-Clube-de-Assinatura-com-WooCommerce).


= Posso modificar e comercializar este plugin? =

O plugin √© licenciado sob GPL v3. Voc√™ pode modificar e distribuir, contanto que suas melhorias e corre√ß√µes sejam contribuidas de volta com o projeto.

Voc√™ deve fazer isso atrav√©s de Pull Requests ao [reposit√≥rio oficial no github](https://github.com/r-martins/PagBank-WooCommerce).

== Changelog ==

= 4.42.1 =
* Desconto PIX n√£o era exibido na p√°gina de produto em alguns temas quando determinada varia√ß√£o de pre√ßo ocorria.
* Em lojas cuja config de links permanentes era a padr√£o (sem url's amig√°veis), alguns links de a√ß√µes de assinaturas, como cancelar e atualizar cart√£o n√£o eram exibidos corretamente, resultando em 404 (N√£o encontrado).
* Motivo da suspens√£o de uma assinatura era exibido como data (01/jan/1970) em alguns cen√°rios
* Ocultamos o campo "Data da Pr√≥xima" cobran√ßa em assinaturas que n√£o est√£o mais ativas a fim de evitar confus√£o.
* Quando um produto vendido em uma assinatura era exclu√≠do do sistema, uma exce√ß√£o n√£o tratada ocorria ao processar a cobran√ßa recorrente. Agora a assinatura ser√° cancelada como esperado.

= 4.42.0 =
* Agora √© poss√≠vel excluir assinaturas de teste (em PagBank > Configura√ß√µes > Recorr√™ncia). Sugerido por Thalisson Henrique.
* Corre√ß√£o de problema na valida√ß√£o do campo telefone quando valida√ß√£o 3d est√° ativa que poderia impedir a finaliza√ß√£o do pedido de forma silenciosa.
* Um erro na chamada mb_strtoupper poderia ocorrer em lojas que n√£o possuem a extens√£o mbstring habilitada no php. Embora comum, contornamos o problema.
* Corre√ß√£o: em alguns cen√°rios onde o pagamento manual de uma assinatura suspensa era feito, ela poderia ser cobrada novamente durante a retentativa de cobran√ßa.
* Corre√ß√£o: o ID e link dos pedidos associados √† uma assinatura eram sempre os mesmos no admin e apontavam pro pedido inicial.
* Corre√ß√£o onde erro cr√≠tico ocorria ao tentar processar uma assinatura cujo produto original n√£o existia mais.


= 4.41.0 =
* Produtos Vari√°veis / Configur√°veis agora podem ser vendidos com [recorr√™ncia PagBank](https://ajuda.pbintegracoes.com/hc/pt-br/articles/22906222668685-Aceitando-pagamentos-recorrentes-com-WooCommerce-Vis%C3%A3o-Geral).
* Alteramos a ordem padr√£o de exibi√ß√£o das assinaturas. Agora assinaturas novas vem primeiro.
* [Restri√ß√£o de conte√∫do para assinantes](https://ajuda.pbintegracoes.com/hc/pt-br/articles/32371612227853-Restri%C3%A7%C3%A3o-de-Conte%C3%BAdo-no-Woo-somente-para-assinantes) deixa de ser beta.
* Corrigimos um problema de performance em lojas com LiteSpeed Cache ativado e HPOS desativado.
* Corre√ß√£o de bug onde no cen√°rio acima, n√£o era poss√≠vel editar ou adicionar produtos.

= 4.40.1 =
* Corre√ß√µes de bugs diversos no Fluid Checkout que poderiam impedir finaliza√ß√£o de compra.
* Corre√ß√£o CSS onde √çcones do PagBank apareciam muito grande em alguns temas como twentytwentyfive.
* Corre√ß√£o em formata√ß√£o da data de expira√ß√£o do link de pagamento enviado por e-mail para o cliente. Agora est√° amig√°vel.

= 4.40.0 =
* Agora √© poss√≠vel sobrescrever instru√ß√µes de pix e boleto na tela de sucesso com [uso de templates](https://ajuda.pbintegracoes.com/hc/pt-br/articles/36986277070349-Como-alterar-ou-customizar-a-tela-de-pagamento-PIX-ou-Boleto). Sugerido por Marcelo Lima (13 Treze Design)
* Removemos as instru√ß√µes de pagamento de Boleto e PIX (incluindo QrCode) que era enviado no e-mail para o cliente mesmo quando o pedido j√° tinha sido pago, causando confus√£o.
* Corre√ß√£o: bot√£o de Cancelar Assinatura n√£o era exibido para assinaturas Suspensas.

= 4.39.0 =
* Agora voc√™ tem [placeholders dispon√≠veis](https://ajuda.pbintegracoes.com/hc/pt-br/articles/36743551280013-Placeholders-dispon%C3%ADveis-para-Boleto) para as instru√ß√µes de boleto dispon√≠veis nas configura√ß√µes do plugin.
* Re-adicionamos os links para documenta√ß√µes e avisos da Sandbox a fim de ajudar quem est√° usando uma chave de testes.
* Melhoramos o texto que explica o que √© o Checkout PagBank nas configura√ß√µes do plugin

= 4.38.0 =
* Relat√≥rios da Recorr√™ncia: adicionamos informa√ß√µes b√°sicas das suas assinaturas acima da listagem delas.
* Criado [filtro pagbank_get_installments](https://ajuda.pbintegracoes.com/hc/pt-br/articles/27339148022669-Hooks-Filtros-e-A%C3%A7%C3%B5es-Dispon%C3%ADveis) pra quem achar que as op√ß√µes de parcelamento existentes n√£o atendem todas as regras de neg√≥cio da sua imagina√ß√£o. Sugerido por [Thiago P√≥voa](https://desenvolvedorwp.com/).

= 4.37.0 =
* Agora voc√™ pode ver o status da sua connect key e √† qual conta pagbank ela pertence.
* Admins agora podem cancelar pedidos recorrentes que possuem limite m√°ximo ciclos de cobran√ßa.
* Corrigido pequeno erro JS que ocorria ao editar um produto no admin (ainda que sem nenhum impacto).

= 4.36.1 =
* Corre√ß√£o: √≠cone do desconto do PIX n√£o era exibido como esperado

= 4.36.0 =
* Melhoria: agora √© poss√≠vel exibir desconto para pagamento via PIX na tela do produto ou categoria
* Agora tamb√©m √© poss√≠vel exibir a estimativa de parcelamento PagBank em produtos configur√°veis
* Corre√ß√£o: quando o campo de reten√ß√£o de estoque n√£o era preenchido com valor algum, exib√≠amos um aviso de que a reten√ß√£o de estoque estava configurada com um prazo menor abaixo da validade de pix e boleto, no admin (Reportado por Rodrigo Millano)

= 4.35.2 =
* Melhoria: agora ficou mais f√°cil obter sua connect key. As informa√ß√µes do formul√°rio j√° vir√£o pr√©-preenchidas e a connect key ser√° adicionada automaticamente evitando erros.
* Melhoria/corre√ß√£o: dependendo das configura√ß√µes do plugin Extra Checkout Fields for Brazil, o campo de telefone poderia n√£o ser enviado na autentica√ß√£o 3D, impedindo finaliza√ß√£o do pedido.
* Corre√ß√£o: em alguns casos quando um admin executava uma a√ß√£o em uma assinatura a mensagem de erro ou sucesso nem sempre era exibida no backend.

= 4.35.1 =
* Corre√ß√£o: boletos tinham caracteres com acento omitidos em produ√ß√£o. Reportado por Elias da [Situati.com](https://situati.com).

= 4.35.0 =
* Agora √© poss√≠vel ocultar o e-mail do comprador e os produtos comprados enviados ao PagBank. Isso d√° mais privacidade para o consumidor e evita e-mails indesejados enviados pelo PagBank ao seu cliente (mas pode prejudicar seu score de risco, especialmente em casos de chargebacks).
* Em alguns cen√°rios e configura√ß√µes, o admin da loja n√£o recebia e-mails de novo pedido, especialmente em pedidos via Boleto.
* Adicionamos um pequeno lembrete sobre a necessidade das chaves aleat√≥rias na tela de configura√ß√£o do PIX para evitar a gera√ß√£o de c√≥digos pix inv√°lidos para usu√°rios novos do PagBank.
* Ao editar o valor de uma assinatura ativa no admin, um erro fatal poderia ocorrer devido √† formata√ß√£o do n√∫mero/valor.

= 4.34.0 =
* Adicionado suporte ao WordPress 6.8
* Melhoria no seletor de meios de pagamento da recorrencia e no seletor de restri√ß√£o de p√°ginas e categorias de conte√∫do restrito.

= 4.33.4 =
* Corre√ß√£o: nos casos onde o pedido inicial de uma recorr√™ncia era excluido um erro ocorria e impedia outras recorr√™ncias de serem cobradas. (Reportado por Ricardo da InfoDoors)

= 4.33.3 =
* Corre√ß√£o/melhoria: ao digitar uma connect key inv√°lida, a valida√ß√£o dizia "Resposta API Vazia" ao inv√©s de dizer que a chave est√° incorreta
* Corre√ß√£o: Quando assinaturas tem descontos na primeira cobran√ßa, o frete era excluido nas cobran√ßas seguintes. (Reportado por Ricardo da InfoDoors)
* Corre√ß√£o: nos casos onde o pedido inicial de uma recorr√™ncia era excluido um erro ocorria e impedia outras recorr√™ncias de serem cobradas. (Reportado por Ricardo da InfoDoors)

= 4.33.2 =
* Melhoria: agora o bot√£o de Live Preview est√° dispon√≠vel na pagina do nosso plugin
* Corre√ß√£o/Melhoria: nos casos onde a opcao 'At√© X parcelas sem juros' √© configurado como 1 (Ao inv√©s de escolher a op√ß√£o 'Juros por conta do comprador') √© utilizada, uma mensagem de erro era caregada no c√°lculo de parcelas (Parameter max_installments_no_interest should be equal 0 or greater than 1.) impossibilitando a compra com cart√£o.

= 4.33.1 =
* Corre√ß√£o: ao usar Checkout PagBank(redirecionamento) cupons de desconto eram ignorados. Reportado por Lucas ([Nuvem Automa√ß√£o](https://www.nuvemautomacao.com.br/?utm_source=pagbank-connect&utm_medium=wordpress&utm_campaign=readme)).
* Corre√ß√£o: am alguns cen√°rios onde um usu√°rio modificou a tabela de recorrencia manualmente, um erro poderia ocorrer ao salvar um produto. Reportado por Alexandre ([X2Design Ag√™ncia Web](https://www.x2design.com.br/?utm_source=pagbank-connect&utm_medium=wordpress&utm_campaign=readme))
* Corre√ß√£o: warning de deprecia√ß√£o era logado quando se pausava uma assinatura criada recentemente em lojas com PHP 8 ou superior.
* Corre√ß√£o: em lojas que um dia tiveram um produto marcado como recorrente pagbank mas desativaram a recorrencia nas configs gerais do modulo, ao adicionar este produto no carrinho, outros meios de pagamento eram omitidos.
* Corre√ß√£o: uso de DateMalformedStringException de forma desnecess√°ria em uma de nossas classes, poderiam causar alertas em lojas com PHP inferior ao 8.3

= 4.33.0 =
* Melhoria: agora quando uma cobran√ßa recorrente falha, o plugin tem a op√ß√£o de tentar realizar a cobran√ßa novamente automaticamente antes de cancelar a assinatura.
* Corre√ß√£o: ao atualizar um pedido feito com checkout pagbank alguns campos e atributos eram deixados de lado
* Corre√ß√£o de erros PHP Deprecated que eram logados
* Pequenos ajustes nos termos e textos dos campos do admin>recorrencia
* Em alguns cen√°rios, ao inserir o shortcode de parcelamentos ([rm_pagbank_credit_card_installments]) na p√°gina do produto, o mesmo era exibido antes do local inserido. (Reportado por Rafael Tasca Design Web)

= 4.32.1 =
* Ajuste: Checkout PagBank n√£o redirecionava para o PagBank quando usado em conjunto com o plugin NextMove Lite - Thank You Page for WooCommerce
* Corre√ß√£o: Erro Fatal poderia ocorrer em lojas com PHP 7.4 por conta de tipo de objeto declarado incompat√≠vel.
* Corre√ß√£o: Pagar no PagBank tinha t√≠tulo padr√£o incorreto (Boleto via PagBank)

= 4.32.0 =
* Checkout PagBank adicionado. Agora voc√™ pode permitir pagar com o checkout PagBank.
* Melhorias de c√≥digo diversas
* Melhoria: pequena melhoria na verifica√ß√£o da disponibilidade de configura√ß√£o de √≠cones din√¢micos em ambiente sem HTTPS.
* Corre√ß√£o: em alguns cen√°rios, lojistas que usavam a op√ß√£o de exibir meios de pagamento agrupados, ap√≥s migrarem da vers√£o 4.13.0 para uma mais nova, n√£o conseguiam mais acessar as op√ß√µes de configura√ß√£o de cart√£o, pix e boleto, al√©m de ter problemas na finaliza√ß√£o dos pedidos.


= 4.31.0 =
* Adicionado recurso para for√ßar atualiza√ß√£o de pedidos independente do sucesso no recebimento das notifica√ß√µs PagBank [saiba mais](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34589281628813)

= 4.30.0 =
* Melhoria paliativa: alguns lojistas na hostgator t√™m experimentado problemas com as notifica√ß√µes do PagBank causadas pelo mod_security, e seus pedidos n√£o s√£o atualizados. Enquanto n√£o implementamos a atualiza√ß√£o pr√≥-ativa de pedidos, voc√™ passa a ter a op√ß√£o de "For√ßar atualiza√ß√£o" do pedido junto ao PagBank nos detalhes do pedido.

= 4.29.3 =
* Corre√ß√£o: em alguns cen√°rios, ao realizar uma compra parcelada com checkout em blocos(nativo) o valor das parcelas selecionadas n√£o era obtido corretamente, ocasionando erro na finaliza√ß√£o do pedido devido ao parametro installments.

= 4.29.2 =
* Altera√ß√£o: evento depreciado onCheckoutBeforeProcessing alterado para onCheckoutValidation, evitando problemas futuros para usu√°rios do checkout em blocos (nativo woo).
* Corre√ß√£o: quando nome do cliente era informado com espa√ßos duplicados um erro na valida√ß√£o 3D Secure poderia acontecer.
* Corre√ß√£o: nome do cliente com caracteres inv√°lidos (ex: $#@) digitados acidentalmente ocasionavam erros na finaliza√ß√£o do pedido e agora s√£o removidos pro-ativamente.

= 4.29.1 =
* Corre√ß√£o: o hook de mudan√ßa de status de uma assinatura (pagbank_recurring_subscription_status_changed) n√£o era acionado em todas as ocasi√µes, dificultando integra√ß√µes de terceiros. Reportado por Thiago P√≥voa.

= 4.29.0 =
* Agora √© poss√≠vel adicionar c√≥digos JavaScript na tela de sucesso ap√≥s a confirma√ß√£o de pagamento ser recebida ou redirecionar o cliente pra outra url. Isso torna sua vida mais f√°cil ao integrar com GA4, Tag Manager, Facebook pixel, etc. [Saiba mais](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34191612071437-Comportamento-ao-confirmar-pagamento).
* Corrigido bug no bot√£o de Copiar c√≥digo Pix ou boleto. Ocorria em alguns checkouts de plugins de terceiros.
* Melhoria: adicionado pequeno <span> no texto das instru√ß√µes de PIX a fim de facilitar customiza√ß√µes CSS. (Sugerido por Weliton Martins)

= 4.28.0 =
* Agora voc√™ pode dar a op√ß√£o do seu cliente usar 3D Secure somente quando uma transa√ß√£o falhar e permitir retentativa (ex: antifraude). [Saiba mais](https://ajuda.pbintegracoes.com/hc/pt-br/articles/34051167045517-Permitir-tentar-novamente-com-valida%C3%A7%C3%A3o-3DS).
* Descontos PIX ou Boleto agora s√£o preservados ap√≥s atualiza√ß√£o de um pedido e exibidos profissionalmente no admin.
* Em alguns casos onde o checkout do Woocommerce apontava para uma p√°gina incorreta, nosso JS n√£o era inserido com sucesso no checkout em blocos impedindo criptografia do cart√£o e finaliza√ß√£o do pedido.
* Corre√ß√£o: Em alguns cen√°rios quando o e-mail do cliente continha letras em caixa alta (geralmente no celular), o PagBank impedia a finaliza√ß√£o do pedido.
* Melhoria: agora o campo de formato das informa√ß√µes de parcelamento no admin s√≥ √© exibido se o shortcode de parcelamento ou informa√ß√µes de parcelamento na p√°gina de produto estiver ativo, tornando a configura√ß√£o mais limpa e precisa.

= 4.27.1 =
* Corrige erro fatal em alguns cen√°rios do admin ap√≥s √∫ltima atualiza√ß√£o, que fazia o plugin ser desativado.

= 4.27.0 =
* Assinantes de um plano recorrente agora podem trocar de cart√£o de cr√©dito.
* Agora √© poss√≠vel especificar o n√∫mero m√°ximo de cobran√ßas em um produto recorrente.
* Melhoria: Adicionamos uma mensagem de aviso nas configs do plugin quando a validade do pix ou boleto for superior √† configura√ß√£o de reten√ß√£o de estoque, o que poder√° fazer um pedido ser cancelado antes de ser pago.
* Corre√ß√£o: Corrigido poss√≠vel erro fatal na √°rea de assinaturas que desativaria o plugin.
* Corre√ß√£o: pedidos com per√≠odo de teste na recorr√™ncia n√£o eram finalizados como esperado no Checkout em blocos, fazendo com que a assinatura n√£o fosse criada
* Corre√ß√£o: no checkout em Blocos com 3D Secure ativo, um cliente n√£o registrado tinha problemas ao finalizar compras (dados inv√°lidos ou insuficientes) na primeira tentativa de finalizar compra com cart√£o.

= 4.26.0 =
* Corre√ß√£o: em lojas com checkout em blocos, o m√©todo de calcular parcelas era chamado indevidamente na tela de sucesso de compra logando erros.
* Corre√ß√£o/melhoria: em alguns cen√°rios onde campos do checkout eram omitidos, a valida√ß√£o 3DS tornava o bot√£o de Finalizar Compra inoperante devido a erros. Agora n√£o s√≥ exibiremos o que pode ter dado errado, como tamb√©m preenchemos alguns campos com valores como 'Nao informado' e 'n/d' a fim de garantir compatibilidade com tais tentativas e melhorar experi√™ncia do usu√°rio nesses cen√°rios.
* Corre√ß√£o/melhoria: em alguns cen√°rios, dependendo da configura√ß√£o ou plugin de checkout utilizado, alguns arquivos JavaScript n√£o eram inseridos, ocasionando erros na criptografia do cartao, aplica√ß√£o de m√°scaras, e consequentemente impedindo a finaliza√ß√£o de pedidos com Cart√£o de Cr√©dito em checkouts diferentes do checkout em bloco.

= 4.25.6 =
* Corre√ß√£o: cobran√ßas recorrentes subsequentes (ap√≥s pedido inicial) falhavam por conta do documento do cliente quando checkout em blocos era utilizado
* Corre√ß√£o: em alguns cen√°rios, boleto e pix eram exibidos como formas de pagamento em pedidos recorrentes quando checkout em blocos era utilizado

= 4.25.5 =
* Corre√ß√£o: pedidos PIX eram cancelados antes da hora em lojas com HPOS desabilitado.

= 4.25.4 =
* Correc√£o: ao usar um cartao invalido a falha no c√°lculo de parcelas poderia logar erros no backend em alguns cen√°rios na chamada de um m√©todo print_r do php.
* Corre√ß√£o: Notice de que query estaria sendo chamada de forma incorreta ao processar o cron de pedidos pix expirados era logada quando HPOS n√£o est√° ativo.
* Melhoria: Quando CEP da loja n√£o est√° configurado, chamadas do Envio Facil logavam retorno de que algum parametro estava faltando sem indicar qual. Agora sequer faremos a requisi√ß√£o ao servidor.

= 4.25.3 =
* Corrige erro na exibi√ß√£o de lista de pedidos associados a uma assinatura quando um dos pedidos foi reembolsado. Reportado por Dennis (Sysney Inform√°tica).

= 4.25.2 =
* Cartflows: corrigido erro de valor inv√°lido no payment_method.card.encrypted quando usado com o plugin Cartflows.

= 4.25.1 =
* Corre√ß√£o: Poss√≠vel erro ao finalizar compras de pedidos recorrentes sem restri√ß√£o de conte√∫do (array_merge argument 2 must be array). Reportado por Dennis (Sysney Inform√°tica).

= 4.25.0 =
* Recorr√™ncia agora tem suporte a restri√ß√£o de conte√∫do s√≥ para assinantes. Voc√™ pode restringir o acesso √† p√°ginas e categorias somente pra quem √© assinante.
* Corre√ß√µes e melhorias diversas no recurso de assinaturas. Corrigimos um problema onde uma assinatura pendente de cancelamento n√£o era cancelada, tratamos algumas exce√ß√µes que poderiam atrasar a cobran√ßa de outras assinaturas, e muito mais.
* Adicionamos detalhes aos logs sobre a assinatura que foi cancelada. Seja por conta de um cancelamento esperado como por um erro no pagamento da recorr√™ncia.
* Adicionamos novas actions na recorr√™ncia que podem ser √∫teis para quem deseja estender esta funcionalidade em outros plugins.
* Adicionada op√ß√£o para marcar pedidos como completo quando s√≥ tiver produtos virtuais

= 4.24.1 =
* Corre√ß√£o Recorr√™ncia: quando a primeira tentativa de fechar um pedido falhava (ex: cartao negado) o pedido era criado de forma insuficiente, impossibilitando o processamento da recorr√™ncia para futuros pedidos.

= 4.24.0 =
* Recorr√™ncia: agora √© poss√≠vel configurar o plugin para excluir outros produtos do carrinho, evitando que a mensagem de que produtos recorrentes devem ser comprados sozinhos seja exibida.
* Envio F√°cil s√≥ exibia uma forma de envio (geralmente a mais cara) ao inv√©s de exibir todas dispon√≠veis.
* Corre√ß√£o: em alguns temas o c√°lculo de parcelas era chamado na tela de sucesso, fazendo com que uma msg de erro fosse logada no pagbank-connect.log.

= 4.23.0 =
* Adicionado suporte ao WP 6.7 e WooCommerce 9.4.
* Melhoria: agora voc√™ n√£o precisa mais de plugins de terceiros para disparar e-mail de novo pedido com c√≥digo PIX ou Boleto. Basta ativar a op√ß√£o nas configura√ß√µes.
* Pequena corre√ß√£o de notice de payment_method n√£o definido em algumas situa√ß√µes quando usado com checkout em blocos.
* Melhoria: notamos que algumas lojas enviavam ou permitiam enviar o campo Estado com letras min√∫sculas, ocasionando erro na finaliza√ß√£o da compra. Agora tratamos isso no pr√≥prio plugin antes do envio.

= 4.22.2 =
* Ajuste: devido a um bug no plugin `pix-por-piggly` algumas lojas tiveram problemas com nossa √∫ltima atualiza√ß√£o. Refizemos a √∫ltima corre√ß√£o de outra forma, a fim de n√£o ser mais impactado pelo bug no outro plugin.  

= 4.22.1 =
* Ajuste: logo ap√≥s a instala√ß√£o do plugin, uma falha na valida√ß√£o da disponibilidade de usar icones com cored din√¢micas tornava o admin bem lento por alguns segundos. Refatoramos o momento que a valida√ß√£o √© feita evitando problemas com loops. :)

= 4.22.0 =
* Melhoria: detec√ß√£o autom√°tica de bandeira no checkout em bloco
* Melhoria: n√£o exibimos mais o seletor de parcelas em pagamentos recorrentes (j√° que era sempre 1x)
* Melhoria: agora os √≠cones dos meios de pagamento tamb√©m aparecem no checkout em blocos
* Melhoria: removemos o efeito hover nos campos do plugin no checkout em blocos, que substituia os placeholders por __/__ (por exemplo)
* Melhoria: campo de data de validade do cart√£o adicionar√° 0 quando o primeiro n√∫mero digitado for maior que 1. Ex: 2, ficar√° 02/, assim como ocorre no form nativo no Woocommerce legado.
* Mudan√ßa interna: removemos os arquivos da pasta build do nosso git. Se voc√™ instala nosso plugin via git ou composer, precisar√° compil√°-los manualmente com npm run build. Mais detalhes no README.md.
* Corre√ß√£o: dependendo da configura√ß√£o da loja, o checkout em blocos permitia o envio do formul√°rio e checkout em pedidos menores que R$1,00, ocasionando erro de CPF/CNPJ

= 4.21.1 =
* Pequena corre√ß√£o no dropdown de parcelas em pagamentos recorrentes (quebrado na √∫ltima vers√£o)
* Normalizamos a nomenclatura de "sem juros" que antes aparecia "sem acr√©scimo" em alguns casos no dropdown de parcelamento

= 4.21.0 =
* Adicionado suporte ao novo Checkoutem Blocks do WooCommerce

= 4.20.2 =
* Corre√ß√£o importante: em alguns casos uma falha de arredondamento na autentica√ß√£o 3d em compras parceladas fazia com que o pedido n√£o pudesse ser conclu√≠do, ocasionando erro 'payment_method.authentication_method.id (Autentica√ß√£o 3D - Recarregue e tente novamente)'.

= 4.20.1 =
* Corre√ß√£o: instru√ß√µes de boleto e pix pararam de ser adicionadas na tela de sucesso ap√≥s nossa √∫ltima atualiza√ß√£o

= 4.20.0 =
* Suporte a reembolso parcial ou total via painel do WooCommerce
* Corre√ß√£o: problema de compatibilidade com alguns plugins ocasionavam falha na finaliza√ß√£o de pedidos com cart√£o de cr√©dito (40002 - Valor inv√°lido. Par√¢metro: charges[0].payment_method.card.encrypted (Criptografia do cart√£o)).
* Bling: agora o Bling identificar√° em quantas parcelas um pedido com cart√£o de cr√©dito foi feito. Veja [como integrar](https://youtu.be/S-_ZwWMnOdc).
* Nota importante: a partir desta vers√£o o `payment_method` salvo no pedido n√£o ser√° mais `rm-pagbank` para todos os m√©todos, e ter√° o sufixo -cc, -pix ou -boleto para identificar o m√©todo de pagamento. Isso pode afetar integra√ß√µes que dependem deste campo. 

= 4.19.0 =
* Melhoria: agora exibimos que um pedido foi pago ainda na tela de sucesso se ele for pago nos primeiros 10 minutos.
* Melhoria: atendendo a pedidos, o √≠cone de Copiar exibido na tela de sucesso de PIX e Boleto passou a ser um bot√£o ao inv√©s de √≠cone.

= Vers√µes mais antigas =
* Veja [changelog completo](https://github.com/r-martins/PagBank-WooCommerce/releases). 

== Upgrade Notice ==
Ao atualizar nosso plugin, voc√™ se protege contra falhas de funcionamento e seguran√ßa e aumenta suas chances de convers√£o no momento mais importante do ciclo de vendas.

Ao atualizar vers√µes majorit√°rias (ex: 3.5 para 4.0), certifique-se de testar rigorosamente sua integra√ß√£o, pois mudan√ßas deste tipo tendem a trazer incompatibilidades entre vers√µes.

== Screenshots ==
1. Cart√£o de Cr√©dito na vis√£o do cliente
2. PIX - Tela de Sucesso
3. Configura√ß√µes de cart√£o de cr√©dito
4. PIX e Boleto - Configura√ß√µes
5. Admin - Tela do Pedido
6. Envio F√°cil
7. Autentica√ß√£o 3D Secure
8. Pedidos Recorrentes (assinaturas)
9. Parcelamento na P√°gina de Produto
10. Suporte a Checkout em Blocos do WooCommerce
11. Conte√∫do para assinantes
